# AI提示词工程说明文档

## 概述

本文档说明了easy-amazon-voc评论分析系统中使用的AI提示词设计原理和使用方法。

## 提示词架构

我们的提示词系统采用三阶段设计：

```
阶段1: 标签体系生成 → 阶段2: 单条评论打标 → 阶段3: 用户画像生成
```

---

## 1. 标签体系生成提示词 (TAG_SYSTEM_GENERATION)

### 设计目标
基于用户评论集合，生成适用于该产品领域的三级标签体系。

### 核心理论框架

#### 四维价值模型
```
人群与场景 (Crowd & Scenario)
├── 使用场景 - 用户在什么情况下使用产品
├── 购买动机 - 为什么购买这个产品
├── 未被满足的需求 - 还有什么需求没有被满足
└── 痛点问题 - 用户遇到的问题和困扰

功能价值 (Functional Value)
├── 产品优点 - 用户认可的优点
├── 产品缺点 - 用户抱怨的缺点
├── 期望建议 - 用户希望改进的地方
└── 设计与外观 - 对产品外观的评价

保障价值 (Assurance Value)
├── 物流配送 - 配送速度、包装等
├── 售后服务 - 维修、退换货等
└── 售前服务 - 咨询、介绍等

体验价值 (Experience Value)
├── 推荐意愿原因分析 - 为什么愿意/不愿意推荐
├── 是否愿意推荐给他人 - 推荐意愿
├── 品牌印象 - 对品牌的认知
├── 感官感受 - 外观、触感、声音等
└── 价格感知 - 对价格的评价
```

### 提示词关键要素

1. **角色定义**：产品分析专家 + NLP专家
2. **任务说明**：构建三级标签体系
3. **理论框架**：详细的四维价值模型说明
4. **设计原则**：层级性、覆盖性、互斥性、简洁性、客观性、可扩展性
5. **输出格式**：严格的JSON格式要求
6. **示例**：提供完整的输出示例

### 参数说明

| 参数 | 说明 | 示例值 |
|------|------|--------|
| `{{CONTENT}}` | 用户评论文本（最多100条） | "产品质量好...物流快..." |
| `maxReviews` | 用于生成标签体系的评论数限制 | 100 |
| `maxTokens` | 内容长度限制（字符数） | 15000 |

### 温度参数
- **Temperature**: 0.7
- **原因**: 需要一定的创造性来生成标签，但也要保持稳定性

---

## 2. 评论打标提示词 (REVIEW_TAGGING)

### 设计目标
基于生成的标签体系，对单条评论进行精确的标签匹配和情感判断。

### 核心逻辑

#### 标签匹配规则
```
IF 评论内容包含标签所描述的特征
    THEN 添加该标签
    ELSE 不添加该标签
```

#### 情感标记规则
```
正面评价 → "[正面]标签名"
负面评价 → "[负面]标签名"
中性描述 → "标签名" (无标记)
```

### 情感判断标准

#### 正面指标
- **关键词**: 好、优秀、满意、喜欢、推荐、值得、方便、快速等
- **表达方式**: 赞赏、认可、感谢
- **行为意向**: 会再次购买、会推荐他人

#### 负面指标
- **关键词**: 差、糟糕、失望、不满、问题、缺陷、麻烦、贵等
- **表达方式**: 抱怨、批评、后悔
- **行为意向**: 不会购买、不推荐他人

#### 中性描述
- 客观陈述产品特性
- 描述使用场景
- 描述用户自身情况

### 提示词关键要素

1. **标签体系注入**：动态注入生成的标签体系
2. **匹配规则**：明确的标签匹配逻辑
3. **情感标记规则**：详细的情感判断标准
4. **输出格式**：与标签体系一致的JSON结构

### 参数说明

| 参数 | 说明 | 示例值 |
|------|------|--------|
| `{{TAG_SYSTEM}}` | 生成的标签体系（JSON） | {"人群与场景": {...}} |
| `{{REVIEW_CONTENT}}` | 单条评论文本 | "这个产品很好用，但是有点贵..." |

### 温度参数
- **Temperature**: 0.3
- **原因**: 需要稳定的输出，减少创造性变化

---

## 3. 用户画像生成提示词 (PERSONA_GENERATION)

### 设计目标
基于所有评论内容，生成3-5个典型用户画像，用于产品定位和营销策略。

### 画像框架

#### 基础属性
- 年龄、性别、地理位置、职业等

#### 行为特征
- 消费频率、使用习惯、购买偏好等

#### 心理动机
- 购买驱动力、价值观、偏好等

#### 外部环境
- 社交圈、活跃平台、影响力来源等

#### 需求痛点
- 核心需求、主要问题、关键目标等

### 提示词关键要素

1. **角色定义**：专业的用户画像分析师
2. **任务说明**：生成3-5个典型用户画像
3. **框架说明**：详细的画像概念框架
4. **输出格式**：结构化的Markdown格式
5. **分析提示**：关注的关键信息点

### 参数说明

| 参数 | 说明 | 示例值 |
|------|------|--------|
| `{{CONTENT}}` | 用户评论文本（最多50条） | "产品质量好...物流快..." |
| `personaCount` | 生成画像的数量 | 3-5 |

### 温度参数
- **Temperature**: 0.7
- **原因**: 需要一定的创造性来生成生动的画像描述

---

## 提示词优化策略

### 1. 明确性原则
- 使用清晰、无歧义的语言
- 提供具体的示例和格式要求
- 明确输出结构

### 2. 上下文注入
- 动态注入评论内容
- 动态注入标签体系
- 避免硬编码示例

### 3. 约束条件
- 限制输出长度
- 限制标签数量
- 强制JSON格式

### 4. 容错处理
- JSON解析失败时使用默认值
- 提供示例格式
- 处理边缘情况

---

## 提示词测试指南

### 测试用例设计

#### 标签体系生成测试
```
输入: 100条关于"猫咪自助理毛器"的评论
验证点:
- 生成的标签是否符合四维价值模型
- 三级标签是否具体且有代表性
- JSON格式是否正确
- 标签命名是否简洁清晰
```

#### 评论打标测试
```
输入: 单条评论 "产品很好用，但是物流有点慢"
验证点:
- 是否正确识别"产品优点"标签
- 是否正确识别"物流配送"标签
- 情感标记是否准确
- JSON格式是否正确
```

#### 用户画像测试
```
输入: 50条关于某产品的评论
验证点:
- 是否生成3-5个画像
- 画像是否有区分度
- 画像描述是否具体生动
- Markdown格式是否正确
```

---

## 提示词版本管理

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| v1.0 | 2025-01-15 | 初始版本，基于easy-amazon-voc迁移 |
| v1.1 | 2025-01-16 | 优化情感判断规则，增加详细标准 |
| v1.2 | 2025-01-17 | 增强用户画像框架，增加分析提示 |

---

## 常见问题

### Q1: 为什么标签体系生成使用较高温度(0.7)？
A: 标签体系生成需要一定的创造性来识别和命名新标签，但也要保持稳定性。

### Q2: 为什么评论打标使用较低温度(0.3)？
A: 打标需要稳定的输出，确保相同的评论得到相似的结果，便于数据分析。

### Q3: 如何处理JSON解析失败？
A: 系统会尝试多种方式提取JSON内容，失败时返回默认标签体系，不会中断处理流程。

### Q4: 支持哪些语言？
A: 目前支持中文和英文，通过locale参数控制。

---

## 未来优化方向

1. **Few-shot Learning**: 在提示词中添加更多示例
2. **思维链**: 引入CoT提示词提高准确性
3. **自适应温度**: 根据评论复杂度动态调整温度参数
4. **多语言扩展**: 支持更多语言的分析
5. **A/B测试**: 对不同提示词版本进行效果对比
