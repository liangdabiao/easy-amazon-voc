# AI提示词测试示例

## 标签体系生成测试

### 输入示例（猫咪自助理毛器产品评论）

```
这个理毛器真的很好用，我的长毛猫很喜欢。每天都会进去梳毛，减少了家里很多猫毛。

物流很快，两天就到了。但是说明书不够详细，第一次安装花了很长时间。

产品的塑料感有点重，感觉不是很耐用。不过价格还算公道，比去宠物店便宜多了。

猫咪刚开始有点害怕，用了几次就习惯了。建议送的时候多送一些猫零食，这样猫咪会更容易适应。

刷毛的质量不错，但是底座不太好清理，如果可以拆卸就好了。
```

### 预期输出示例

```json
{
  "人群与场景": {
    "用户需求与痛点-使用场景": ["长毛猫主", "日常梳理", "减少猫毛", "猫咪适应期"],
    "用户需求与痛点-购买动机": ["价格优势", "替代宠物店", "方便省事"],
    "用户需求与痛点-未被满足的需求": ["猫咪零食引诱", "可拆卸底座"],
    "用户需求与痛点-痛点问题": ["安装耗时", "说明书不详细", "底座难清理"]
  },
  "功能价值": {
    "产品反馈-产品优点": ["理毛效果好", "猫咪喜欢", "减少猫毛", "价格公道"],
    "产品反馈-产品缺点": ["塑料感重", "不够耐用", "底座难清理"],
    "产品反馈-用户期望建议": ["详细说明书", "可拆卸底座", "赠送猫零食"],
    "产品反馈-设计与外观": ["塑料材质", "产品设计"]
  },
  "保障价值": {
    "服务评价-物流配送": ["配送速度快", "包装完整"],
    "服务评价-售后服务": [],
    "服务评价-售前服务": []
  },
  "体验价值": {
    "品牌形象与口碑-推荐意愿原因分析": ["性价比高", "方便实用"],
    "品牌形象与口碑-是否愿意推荐给他人": ["是", "否"],
    "品牌形象与口碑-品牌印象": ["价格实惠", "质量一般"],
    "感官感受": ["塑料质感", "外观普通"],
    "价格感知": ["价格公道", "比宠物店便宜"]
  }
}
```

---

## 评论打标测试

### 输入示例

```
产品很好用，我的猫咪很喜欢，每天都进去梳毛。但是物流有点慢，等了一周才到。
```

### 预期输出示例

```json
{
  "人群与场景": {
    "用户需求与痛点-使用场景": ["[正面]日常梳理"],
    "用户需求与痛点-购买动机": [],
    "用户需求与痛点-未被满足的需求": [],
    "用户需求与痛点-痛点问题": []
  },
  "功能价值": {
    "产品反馈-产品优点": ["[正面]好用", "[正面]猫咪喜欢"],
    "产品反馈-产品缺点": [],
    "产品反馈-用户期望建议": [],
    "产品反馈-设计与外观": []
  },
  "保障价值": {
    "服务评价-物流配送": ["[负面]配送慢"],
    "服务评价-售后服务": [],
    "服务评价-售前服务": []
  },
  "体验价值": {
    "品牌形象与口碑-推荐意愿原因分析": [],
    "品牌形象与口碑-是否愿意推荐给他人": [],
    "品牌形象与口碑-品牌印象": [],
    "感官感受": [],
    "价格感知": []
  }
}
```

---

## 用户画像生成测试

### 输入示例（多评论汇总）

```
评论1: 作为新手养猫人，这个产品帮了我很多。猫咪刚开始有点害怕，现在已经习惯了。
评论2: 我家是三只猫的老猫主了，这个理毛器对长毛猫特别有用。
评论3: 价格有点贵，但是质量确实不错，值得购买。
评论4: 物流很快，包装也很好，满意。
评论5: 希望能出个更小号的，我家猫咪比较小。
```

### 预期输出示例

```markdown
### 新手猫主 - 适应期引导型
- **年龄性别**: 25-30岁，女性
- **需求关键词**: 新手养猫, 引导适应, 产品教育
- **购买动机**: 解决养猫初期的猫毛问题，学习正确使用方法
- **情绪语气**: 期待但谨慎，需要指导
- **画像描述**: 养猫经验不足的新手猫主，对产品功能期待较高但担心猫咪不接受。需要详细的引导教程和耐心，对产品学习成本敏感。

### 多猫家庭 - 高效管理型
- **年龄性别**: 35-45岁，性别不限
- **需求关键词**: 多猫家庭, 长毛猫, 高效梳理
- **购买动机**: 提高多猫环境下的梳毛效率，减少人工投入
- **情绪语气**: 实用主义，注重效率
- **画像描述**: 养有多只猫咪的资深猫主，特别是长毛猫品种。关注产品的实际效果和耐用性，对价格敏感度较低但要求高质量产品。

### 品质追求者 - 价格敏感型
- **年龄性别**: 28-40岁，性别不限
- **需求关键词**: 品质优先, 价格权衡, 性价比
- **购买动机**: 寻找高品质产品，愿意为质量付费但关注性价比
- **情绪语气**: 理性分析，价值导向
- **画像描述**: 注重产品品质的理性消费者，会仔细评估价格与质量的平衡。对产品的材质、工艺有较高要求，愿意为可靠品质支付溢价。
```

---

## 测试命令示例

### 测试标签体系生成

```typescript
import { commentAnalysisService } from './lib/services/comment-analysis-service';

const testReviews = [
  "这个理毛器真的很好用，我的长毛猫很喜欢...",
  "物流很快，两天就到了...",
  "产品的塑料感有点重...",
  // ... 更多评论
];

const tagSystem = await commentAnalysisService.generateTagSystem(testReviews, 'zh');
console.log('标签体系:', JSON.stringify(tagSystem, null, 2));
```

### 测试评论打标

```typescript
const testReview = "产品很好用，但是物流有点慢";
const tags = await commentAnalysisService.tagSingleReview(testReview, tagSystem, 'zh');
console.log('打标结果:', JSON.stringify(tags, null, 2));
```

### 测试用户画像生成

```typescript
const persona = await commentAnalysisService.generatePersona(testReviews, 'zh');
console.log('用户画像:', persona);
```

---

## 性能指标

| 指标 | 目标值 | 说明 |
|------|--------|------|
| 标签体系生成时间 | < 30秒 | 100条评论生成标签体系 |
| 单条评论打标时间 | < 3秒 | 含情感判断 |
| 用户画像生成时间 | < 20秒 | 50条评论生成画像 |
| JSON解析成功率 | > 95% | 容错处理后 |
| 标签准确率 | > 85% | 人工评估 |
| 情感判断准确率 | > 80% | 正面/负面判断 |

---

## 调试技巧

### 1. 查看原始AI响应

```typescript
// 在 comment-analysis-service.ts 中添加日志
console.log('AI Raw Response:', content);
```

### 2. 测试不同温度参数

```typescript
// 测试温度对结果的影响
const temperatures = [0.1, 0.3, 0.5, 0.7, 0.9];
for (const temp of temperatures) {
  const result = await testWithTemperature(temp);
  console.log(`Temperature ${temp}:`, result);
}
```

### 3. 比较不同模型

```typescript
const models = ['gpt-4o', 'gpt-4o-mini', 'glm-4.6'];
for (const model of models) {
  const result = await testWithModel(model);
  console.log(`Model ${model}:`, result);
}
```

### 4. 分析失败案例

```typescript
// 收集JSON解析失败的案例
if (parseError) {
  console.error('Parse Error:', parseError);
  console.error('Raw Content:', content);
  // 保存到文件用于分析
  fs.writeFileSync('error_cases.jsonl', `${JSON.stringify({content, error})}\n`, {flag: 'a'});
}
```
